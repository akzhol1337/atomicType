<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<section class="registerBox" style="position: center; display: flex; flex-direction: column; align-items: center;">
    <h1>Register Page</h1>
    <div class="form">
        <form id="regForm" method="post" style=" display: flex; flex-direction: column; align-content: space-between; width: 100%;" >
            <input type="text" id="username" name="username" placeholder="Username">
            <input type="email" id="email" name="email" placeholder="Email">
            <input type="password" id="password" name="password" placeholder="Password">
            <input type="submit" id="register" name="register" value="Register">
        </form>
    </div>

    <div id="result_msg">

    </div>
</section>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
    $( document ).ready(function() {
        $('#regForm').on('submit', function() {
            $('#result_msg').html('');
            var formData = {
                username : $('#username').val(),
                email : $('#email').val,
                password : $('#password').val(),
            };

            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/user/save",
                data: formData,
                dataType: "json",
                complete: [ function (e) {
                    console.log(e.responseText);
                    console.log(formData.username)
                    if (e.responseText === "User has been created") {
                        window.location.replace("/");
                    }
                    else if (e.responseText == "User with this username already exist") {
                        $('#username').css("border", "1px solid red")
                        $('#result_msg').html('User already exist');
                    }
                    else if (e.responseText == "User with this email already exist"){
                        $('#email').css("border", "1px solid red")
                        $('#result_msg').html('User already exist');
                    }
                }]
            });
        });
    });
</script>
</body>
</html>